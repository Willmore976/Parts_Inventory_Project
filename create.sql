-- If you cannot write to the c:\, create the following folder c:\is380\ and use the following
-- SPOOL c:\is380\CreateOutput.txt
SPOOL c:\CreateOutput.txt
SET ECHO ON

-- Program to create tables for the project and populate them with sample data
-- (ORD, PART, SUPPLIER, SUPPPART)

-- Set environment variables
SET DEFINE OFF


-- Drop tables if they already exist
-- Note: If you have existing tables with the same names, this script
--       will attemp to drop them.  However, due to your referential integrity
--       constraints, the script may fail.  So, you will need to drop them manually or
--       you can modify the drop command to include droping constraints: CASCADE CONSTRAINTS.

DROP TABLE ORD;
DROP TABLE SUPPPART;
DROP TABLE SUPPLIER;
DROP TABLE PART;
DROP SEQUENCE ORDERNUMBER;


-- Create the tables and populate them with sample data 
-- Note: Implicit inserts used for PART, SUPPLIER, & SUPPPART
--       and Explicit inserts used for ORD.

CREATE TABLE PART (
PART_NUM 		INTEGER,
PART_DESCRIPTION 	VARCHAR2(20),
PART_QTYONHAND		INTEGER,
CONSTRAINT PART_PART_NUM_PK PRIMARY KEY(PART_NUM));

INSERT INTO PART VALUES (100,'Oil Filter',75);
INSERT INTO PART VALUES (101,'Air Filter',120);
INSERT INTO PART VALUES (102,'Oil Can',300);
INSERT INTO PART VALUES (103,'Spark Plugs',200);
INSERT INTO PART VALUES (104,'Antifreeze',100);


CREATE TABLE SUPPLIER (
SUPPLIER_CODE 		INTEGER,
SUPPLIER_NAME 		VARCHAR2(20),
SUPPLIER_ADDRESS	VARCHAR2(20),
SUPPLIER_CITY		VARCHAR2(20),
SUPPLIER_STATE		CHAR(2),
SUPPLIER_ZIP		CHAR(5),
SUPPLIER_AREACODE	CHAR(3),
SUPPLIER_PHONE		CHAR(8),
CONSTRAINT SUPP_CODE_PK PRIMARY KEY(SUPPLIER_CODE));

INSERT INTO SUPPLIER VALUES (101,'ACE Auto','123 Able Lane','Long Beach','CA','90840','562','555-1234');
INSERT INTO SUPPLIER VALUES (102,'Better Auto Buys','456 Main Street','Huntington Beach','CA','92647','714','555-2222');
INSERT INTO SUPPLIER VALUES (103,'Cars R Us','321 Car Lane','Long Beach','CA','90840','562','555-3333');
INSERT INTO SUPPLIER VALUES (104,'Delta Parts','444 Auto Way','Long Beach','CA','90840','562','555-4444');

CREATE TABLE SUPPPART (
SUPPLIER_CODE 	INTEGER,
PART_NUM	INTEGER,
CONSTRAINT SP_SUPPCODE_PARTNUM_PK PRIMARY KEY(SUPPLIER_CODE, PART_NUM),
CONSTRAINT SP_SUPP_CODE_FK FOREIGN KEY(SUPPLIER_CODE) REFERENCES SUPPLIER,
CONSTRAINT SP_PART_NUM_FK FOREIGN KEY(PART_NUM) REFERENCES PART);

INSERT INTO SUPPPART VALUES (101,100);
INSERT INTO SUPPPART VALUES (101,101);
INSERT INTO SUPPPART VALUES (101,102);
INSERT INTO SUPPPART VALUES (101,103);
INSERT INTO SUPPPART VALUES (101,104);
INSERT INTO SUPPPART VALUES (102,101);
INSERT INTO SUPPPART VALUES (102,102);
INSERT INTO SUPPPART VALUES (103,102);
INSERT INTO SUPPPART VALUES (103,103);
INSERT INTO SUPPPART VALUES (104,102);
INSERT INTO SUPPPART VALUES (104,103);
INSERT INTO SUPPPART VALUES (104,104);


CREATE TABLE ORD (
ORD_NUM 		INTEGER,
PART_NUM 		INTEGER,
SUPPLIER_CODE		INTEGER,
ORD_QTY			INTEGER,
ORD_DATE		DATE,
ORD_RECQTY		INTEGER,
ORD_RECDATE		DATE,
CONSTRAINT ORD_NUM_PK PRIMARY KEY(ORD_NUM),
CONSTRAINT ORD_PARTNUM_SUPPCODE_FK FOREIGN KEY(SUPPLIER_CODE, PART_NUM) REFERENCES SUPPPART);

INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1000, 101, 101, 20, '03-APR-2015', 20, '06-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1001, 102, 101, 30, '03-APR-2015', 30, '05-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1002, 103, 101, 30, '04-APR-2015', 30, '05-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1003, 102, 101, 10, '04-APR-2015', 10, '05-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1004, 102, 101, 10, '03-APR-2015', 10, '06-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1005, 102, 102, 25, '04-APR-2015', 25, '04-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1006, 101, 102, 20, '03-APR-2015', 20, '06-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1007, 103, 103, 40, '05-APR-2015', 40, '07-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1008, 102, 104, 10, '05-APR-2015', 10, '06-APR-2015');
INSERT INTO ORD (ORD_NUM, PART_NUM, SUPPLIER_CODE, ORD_QTY, ORD_DATE, ORD_RECQTY, ORD_RECDATE)
   VALUES (1009, 103, 104, 10, '03-APR-2015', 10, '05-APR-2015');

-- Create sequence
CREATE SEQUENCE ORDERNUMBER
START WITH 1010
INCREMENT BY 1;


-- Reset environment variables
SET DEFINE ON
SET ECHO OFF
SPOOL OFF